---
import { getCollection } from 'astro:content';
// Ambil 3 artikel terbaru
const allPosts = await getCollection('blog');
const latestPosts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()).slice(0, 3);
---

<section class="py-16 px-6 max-w-7xl mx-auto">
    <div class="flex justify-between items-end mb-10">
        <h2 class="text-3xl font-bold text-slate-900">Kabar Terbaru</h2>
        <a href="/blog" class="text-blue-900 font-bold hover:underline">Lihat Semua Artikel &rarr;</a>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
        {latestPosts.map((post) => (
            <article class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition group border border-slate-100">
                <div class="h-48 overflow-hidden">
                    <img src={post.data.image} alt={post.data.title} class="w-full h-full object-cover group-hover:scale-105 transition duration-500" />
                </div>
                <div class="p-6">
                    <div class="text-xs font-bold text-yellow-600 mb-2 uppercase">{post.data.tags?.[0] || 'Berita'}</div>
                    <h3 class="text-xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-900 transition">{post.data.title}</h3>
                    <p class="text-slate-500 text-sm line-clamp-2">{post.data.description}</p>
                </div>
            </article>
        ))}
        {latestPosts.length === 0 && <p class="text-slate-500">Belum ada artikel terbaru.</p>}
    </div>
</section>